scanpath_mamba_agent python diagnose_model.py
======================================================================
1. 检查数据加载
======================================================================
Loading test data from ../../adaptive_scanpath/data_processing/processed_data/Salient360_H_HE_processed.pkl...
Expanding dataset: each scanpath becomes an independent sample...
Loaded 2424 samples from 22 images (augmentation: False)
  Average 110.2 scanpaths per image
样本key: P71_5376x2688
GT路径形状: torch.Size([30, 2])
GT路径范围: x=[0.717, 0.818], y=[0.225, 0.666]
GT路径前5个点:
tensor([[0.7506, 0.5603],
        [0.7511, 0.5610],
        [0.7521, 0.5610],
        [0.7583, 0.5663],
        [0.7688, 0.5854]])

======================================================================
2. 检查模型预测
======================================================================
加载模型: Epoch 20

【测试1: 使用GT起始点】
预测路径范围: x=[0.461, 0.627], y=[0.386, 0.829]
预测路径前5个点:
[[0.627016   0.829486  ]
 [0.5661475  0.7262925 ]
 [0.565881   0.6896491 ]
 [0.56446326 0.674072  ]
 [0.5458689  0.62602663]]
与GT的平均距离: 0.2802

【测试2: 不使用GT起始点】
预测路径范围: x=[0.439, 0.834], y=[0.337, 0.780]
预测路径前5个点:
[[0.83363605 0.77973735]
 [0.81839687 0.6635709 ]
 [0.7673749  0.64398354]
 [0.78066474 0.6330912 ]
 [0.78171796 0.6240285 ]]
与GT的平均距离: 0.1697

【测试3: Teacher Forcing=1.0（应该完美复制GT）】
预测路径范围: x=[0.443, 0.815], y=[0.330, 0.838]
预测路径前5个点:
[[0.8066314  0.8382727 ]
 [0.8147477  0.7150123 ]
 [0.75825906 0.67578053]
 [0.7641103  0.6281414 ]
 [0.7412827  0.58947396]]
与GT的平均距离: 0.1835

⚠️  警告: Teacher Forcing=1.0时仍然无法复制GT!
   这说明模型架构或训练有严重问题!

======================================================================
3. 检查路径多样性
======================================================================
预测路径标准差: x=0.0392, y=0.1122
GT路径标准差:   x=0.0318, y=0.1479

⚠️  警告: 预测路径标准差过小，可能出现'卡住'现象!

======================================================================
4. 检查步长分布
======================================================================
预测步长: mean=0.0243, std=0.0215, min=0.0049, max=0.1198
GT步长:   mean=0.0212, std=0.0144, min=0.0006, max=0.0576

======================================================================
诊断完成
======================================================================